{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/stepcannuscio/Desktop/Home/Clients/Burman's Health Shop/sims/frontend/src/Orders/OrderPopup.js\",\n    _s = $RefreshSig$();\n\nimport { useState, useEffect } from \"react\";\nimport * as router from \"./orderAPI\";\nexport default function OrderPopup(props) {\n  _s();\n\n  const [data, setData] = useState([]);\n  const [isLoading, setLoading] = useState(false);\n  const [btnText, setBtnText] = useState(\"Edit\");\n  const [isEditing, setIsEditing] = useState(false);\n  const [editColor, setEditColor] = useState(\"#76c32d\");\n  const [isTrackingHidden, setTrackingHidden] = useState(true);\n  const [status, setStatus] = useState(null);\n  const [tracking, setTracking] = useState(null);\n  const [discount, setDiscount] = useState(null);\n  const [dataToUpdate, setDataToUpdate] = useState([]);\n  const formatter = new Intl.NumberFormat('en-US', {\n    style: 'currency',\n    currency: 'USD',\n    minimumFractionDigits: 0\n  });\n  const inputStyle = {\n    display: \"block\",\n    margin: \"20px auto\",\n    padding: \"10px 20px\",\n    fontSize: \"16px\",\n    border: \"none\",\n    borderBottom: \"1px solid #76c32d\"\n  };\n\n  function getData() {\n    setLoading(true);\n    router.loadOrder(props.values.id).then(data => {\n      if (data) {\n        setData(data);\n        setLoading(false);\n      }\n    });\n  }\n\n  useEffect(() => {\n    getData();\n  }, []);\n\n  if (isLoading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"loader\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 16\n    }, this);\n  }\n\n  function editBtnClicked(e) {\n    if (btnText === \"Edit\") {\n      setBtnText(\"Save\");\n    } else {\n      // Save data\n      const updateDict = {};\n      dataToUpdate.forEach(item => {\n        if (item.quantity) {\n          updateDict[item.id] = item.quantity;\n        }\n      });\n      console.log(data);\n      router.updateOrder(tracking, discount, status, props.values.id, data, updateDict).then(data => {\n        if (data === \"Success\") {\n          setBtnText(\"Edit\");\n          getData();\n          setTrackingHidden(true);\n        } else {\n          setBtnText(\"Edit\");\n        }\n      });\n    }\n\n    setIsEditing(!isEditing);\n    setEditColor(editColor === \"#26B1FF\" ? \"#76c32d\" : \"#26B1FF\");\n  }\n\n  function statusChanged(e) {\n    setStatus(e.target.value);\n\n    if (e.target.value === \"fulfilled\") {\n      setTrackingHidden(false);\n    } else {\n      setTrackingHidden(true);\n    }\n  }\n\n  function capitalizeFirstLetter(string) {\n    return string.charAt(0).toUpperCase() + string.slice(1);\n  } //   function editInput(e) {\n  //     if (e.target.value !== e.target.placeholder) {\n  //         const orderItemId = e.target.id.split('-')[0].trim()\n  //         const newData = {\n  //             id: orderItemId\n  //         }\n  //         // Quantity value has changed for this variant\n  //         if (e.target.id.includes(\"quantity\")) {\n  //             newData.quantity = e.target.value\n  //         } else {\n  //             newData.cost = e.target.value\n  //         }\n  //         setDataToUpdate(oldArray => [...oldArray, newData])\n  //     }\n  // }\n\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"top-content\",\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"close\",\n        onClick: () => props.toggle(),\n        children: \"\\xD7    \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n        style: {\n          fontSize: \"2rem\"\n        },\n        children: [\"Order #\", data.length > 0 ? data[0].order_id : \"Error loading data\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        style: {\n          fontSize: \"1.4rem\"\n        },\n        children: [\"Vendor: \", data.length > 0 ? data[0].name : \"\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            display: \"inline-block\",\n            margin: \"10px\",\n            fontSize: \"1.1rem\"\n          },\n          children: [\"Subtotal: \", data.length > 0 ? formatter.format(data[0].order_subtotal) : \"\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            display: \"inline-block\",\n            margin: \"10px\",\n            fontSize: \"1.1rem\"\n          },\n          children: [\"Discount: \", data.length > 0 ? formatter.format(data[0].order_discount) : \"\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            display: \"inline-block\",\n            margin: \"10px\",\n            fontSize: \"1.1rem\"\n          },\n          children: [\"Total: \", data.length > 0 ? formatter.format(data[0].order_total) : \"\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        style: {\n          fontSize: \"1.1rem\",\n          color: data.length > 0 && data[0].status === \"submitted\" ? \"red\" : data.length > 0 && data[0].status === \"fulfilled\" ? \"orange\" : \"green\"\n        },\n        children: [\"Status: \", data.length > 0 ? capitalizeFirstLetter(data[0].status) : \"\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            display: \"inline-block\",\n            margin: \"10px\",\n            fontSize: \"1.1rem\"\n          },\n          children: [\"Submitted: \", data.length > 0 ? data[0].submitted_date : \"\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            display: \"inline-block\",\n            margin: \"10px\",\n            fontSize: \"1.1rem\"\n          },\n          children: [\"Fulfilled: \", data.length > 0 ? data[0].fulfilled_date : \"\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            display: \"inline-block\",\n            margin: \"10px\",\n            fontSize: \"1.1rem\"\n          },\n          children: [\"Completed: \", data.length > 0 ? data[0].completed_date : \"\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 17\n      }, this), isEditing ? /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          textAlign: \"center\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"select\", {\n          style: inputStyle,\n          onChange: statusChanged,\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"submitted\",\n            children: \"Submitted\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 140,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"fulfilled\",\n            children: \"Fulfilled\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 141,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"completed\",\n            children: \"Completed\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 142,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          style: inputStyle,\n          hidden: isTrackingHidden,\n          className: \"table-cell\",\n          placeholder: \"Tracking\",\n          onChange: e => setTracking(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          style: inputStyle,\n          hidden: isTrackingHidden,\n          className: \"table-cell\",\n          placeholder: \"Discount (i.e. 180.02)\",\n          onChange: e => setDiscount(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 17\n      }, this) : /*#__PURE__*/_jsxDEV(\"p\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        hidden: isTrackingHidden ? data[0] && data[0].status === \"completed\" : false,\n        onClick: editBtnClicked,\n        className: \"edit-btn\",\n        style: {\n          backgroundColor: editColor\n        },\n        children: btnText\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n      style: {\n        textAlign: \"center\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n        children: /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [/*#__PURE__*/_jsxDEV(\"th\", {\n            className: \"table-header\",\n            children: \"Product\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 156,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            className: \"table-header\",\n            children: \"Variant\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 157,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            className: \"table-header\",\n            children: \"Quantity\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 158,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            className: \"table-header\",\n            children: \"Cost\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 159,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            className: \"table-header\",\n            children: \"Subtotal\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 160,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            className: \"table-header\",\n            children: \"Discount\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 161,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            className: \"table-header\",\n            children: \"Total\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 162,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n        children: data.map((item, index) => {\n          return /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"td\", {\n              className: \"table-cell\",\n              children: item.product\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 169,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              className: \"table-cell\",\n              children: item.variant\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 170,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              className: \"table-cell\",\n              children: item.quantity\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 171,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              className: \"table-cell\",\n              children: formatter.format(item.cost)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 172,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              className: \"table-cell\",\n              children: formatter.format(item.subtotal)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 173,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              className: \"table-cell\",\n              children: formatter.format(item.discount)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 174,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              className: \"table-cell\",\n              children: formatter.format(item.total)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 175,\n              columnNumber: 29\n            }, this)]\n          }, index, true, {\n            fileName: _jsxFileName,\n            lineNumber: 168,\n            columnNumber: 25\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 118,\n    columnNumber: 9\n  }, this);\n}\n\n_s(OrderPopup, \"X234wRUOr/4NAuKbPFvG22V0qE0=\");\n\n_c = OrderPopup;\n\nvar _c;\n\n$RefreshReg$(_c, \"OrderPopup\");","map":{"version":3,"sources":["/Users/stepcannuscio/Desktop/Home/Clients/Burman's Health Shop/sims/frontend/src/Orders/OrderPopup.js"],"names":["useState","useEffect","router","OrderPopup","props","data","setData","isLoading","setLoading","btnText","setBtnText","isEditing","setIsEditing","editColor","setEditColor","isTrackingHidden","setTrackingHidden","status","setStatus","tracking","setTracking","discount","setDiscount","dataToUpdate","setDataToUpdate","formatter","Intl","NumberFormat","style","currency","minimumFractionDigits","inputStyle","display","margin","padding","fontSize","border","borderBottom","getData","loadOrder","values","id","then","editBtnClicked","e","updateDict","forEach","item","quantity","console","log","updateOrder","statusChanged","target","value","capitalizeFirstLetter","string","charAt","toUpperCase","slice","toggle","length","order_id","name","format","order_subtotal","order_discount","order_total","color","submitted_date","fulfilled_date","completed_date","textAlign","backgroundColor","map","index","product","variant","cost","subtotal","total"],"mappings":"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","sourcesContent":["import {useState, useEffect} from \"react\"\nimport * as router from \"./orderAPI\"\n\nexport default function OrderPopup(props) {\n    \n    const [data, setData] = useState([])\n    const [isLoading, setLoading] = useState(false)\n    const [btnText, setBtnText] = useState(\"Edit\")\n    const [isEditing, setIsEditing] = useState(false)\n    const [editColor, setEditColor] = useState(\"#76c32d\")\n    const [isTrackingHidden, setTrackingHidden] = useState(true)\n    const [status, setStatus] = useState(null)\n    const [tracking, setTracking] = useState(null)\n    const [discount, setDiscount] = useState(null)\n    const [dataToUpdate, setDataToUpdate] = useState([])\n\n    const formatter = new Intl.NumberFormat('en-US', {\n        style: 'currency',\n        currency: 'USD',\n        minimumFractionDigits: 0\n        })\n\n    const inputStyle = {\n        display: \"block\",\n        margin: \"20px auto\",\n        padding: \"10px 20px\",\n        fontSize: \"16px\",\n        border: \"none\",\n        borderBottom: \"1px solid #76c32d\"\n    }\n\n    function getData() {\n        setLoading(true)\n        router.loadOrder(props.values.id).then(data => {\n            if (data) {\n                setData(data)\n                setLoading(false)      \n            }\n        })\n    }\n\n    useEffect(() => {\n        getData()\n    }, []);\n\n    if (isLoading) {\n        return <div className=\"loader\"></div>;\n    }\n\n    function editBtnClicked(e) {\n        if (btnText === \"Edit\") {\n            setBtnText(\"Save\")\n        } else {\n            // Save data\n            const updateDict = {}\n            dataToUpdate.forEach(item => {\n                if (item.quantity) {\n                    updateDict[item.id] = item.quantity\n                }\n            })\n\n            console.log(data)\n            \n            router.updateOrder(tracking, discount, status, props.values.id, data, updateDict).then(data => {\n                if (data === \"Success\") {\n                    setBtnText(\"Edit\")\n                    getData()\n                    setTrackingHidden(true)\n                } else {\n                    setBtnText(\"Edit\")\n                }\n            })            \n            \n        }\n        setIsEditing(!isEditing)\n        setEditColor(editColor === \"#26B1FF\" ? \"#76c32d\" : \"#26B1FF\")\n    }\n\n    function statusChanged(e) {\n\n        setStatus(e.target.value)\n\n        if (e.target.value === \"fulfilled\") {\n            setTrackingHidden(false)\n        } else {\n            setTrackingHidden(true)\n        }\n    }\n\n    function capitalizeFirstLetter(string) {\n        return string.charAt(0).toUpperCase() + string.slice(1);\n      }\n\n    //   function editInput(e) {\n    //     if (e.target.value !== e.target.placeholder) {\n    //         const orderItemId = e.target.id.split('-')[0].trim()\n\n    //         const newData = {\n    //             id: orderItemId\n    //         }\n    //         // Quantity value has changed for this variant\n    //         if (e.target.id.includes(\"quantity\")) {\n    //             newData.quantity = e.target.value\n    //         } else {\n    //             newData.cost = e.target.value\n    //         }\n\n            \n\n          \n\n    //         setDataToUpdate(oldArray => [...oldArray, newData])\n       \n    //     }\n    // }\n\n    return (\n        <div>\n            <div className=\"top-content\">\n                <span className=\"close\" onClick={() =>  props.toggle()}>&times;    </span>\n                <h2 style={{fontSize: \"2rem\"}}>Order #{data.length > 0 ? data[0].order_id : \"Error loading data\"}</h2>\n                <p style={{fontSize: \"1.4rem\"}}>Vendor: {data.length > 0 ? data[0].name : \"\"}</p>\n                <div>\n                    <p style={{display: \"inline-block\", margin: \"10px\",fontSize: \"1.1rem\"}}>Subtotal: {data.length > 0 ? formatter.format(data[0].order_subtotal) : \"\"}</p>\n                    <p style={{display: \"inline-block\", margin: \"10px\", fontSize: \"1.1rem\"}}>Discount: {data.length > 0 ? formatter.format(data[0].order_discount) : \"\"}</p>\n                    <p style={{display: \"inline-block\", margin: \"10px\", fontSize: \"1.1rem\"}}>Total: {data.length > 0 ? formatter.format(data[0].order_total) : \"\"}</p>\n                </div>\n\n                <p style={{fontSize: \"1.1rem\", color: data.length > 0 && data[0].status === \"submitted\" ? \"red\" : data.length > 0 && data[0].status===\"fulfilled\" ? \"orange\" : \"green\"}}>Status: {data.length > 0 ? capitalizeFirstLetter(data[0].status) : \"\"}</p>\n                <div>\n                    <p style={{display: \"inline-block\", margin: \"10px\", fontSize: \"1.1rem\"}}>Submitted: {data.length > 0 ? data[0].submitted_date : \"\"}</p>\n                    <p style={{display: \"inline-block\", margin: \"10px\", fontSize: \"1.1rem\"}}>Fulfilled: {data.length > 0 ? data[0].fulfilled_date : \"\"}</p>\n                    <p style={{display: \"inline-block\", margin: \"10px\", fontSize: \"1.1rem\"}}>Completed: {data.length > 0 ? data[0].completed_date : \"\"}</p>\n                </div>\n                \n                {isEditing \n                ?\n                <div style={{textAlign: \"center\"}}>\n                    <select style={inputStyle} onChange={statusChanged}>\n                        <option value=\"submitted\">Submitted</option>\n                        <option value=\"fulfilled\">Fulfilled</option>\n                        <option value=\"completed\">Completed</option>\n                    </select>\n                    <input style={inputStyle} hidden={isTrackingHidden} className=\"table-cell\" placeholder=\"Tracking\" onChange={(e) => setTracking(e.target.value)}></input>\n                    <input style={inputStyle} hidden={isTrackingHidden} className=\"table-cell\" placeholder=\"Discount (i.e. 180.02)\" onChange={(e) => setDiscount(e.target.value)}></input>\n                    </div>\n                :\n                <p></p>\n                }\n                <button hidden={isTrackingHidden ? data[0] && data[0].status === \"completed\" : false} onClick={editBtnClicked} className=\"edit-btn\" style={{backgroundColor: editColor}}>{btnText}</button>\n            </div>\n\n            <table style={{textAlign: \"center\"}}>\n                <thead >\n                    <tr>\n                        <th className=\"table-header\">Product</th>\n                        <th className=\"table-header\">Variant</th>\n                        <th className=\"table-header\">Quantity</th>\n                        <th className=\"table-header\">Cost</th>\n                        <th className=\"table-header\">Subtotal</th>\n                        <th className=\"table-header\">Discount</th>\n                        <th className=\"table-header\">Total</th>\n                    </tr>\n                </thead>\n                <tbody>\n                {data.map((item, index) => {\n                    return (\n                        <tr key={index}>\n                            <td className=\"table-cell\">{item.product}</td>\n                            <td className=\"table-cell\">{item.variant}</td>\n                            <td className=\"table-cell\">{item.quantity}</td>\n                            <td className=\"table-cell\">{formatter.format(item.cost)}</td>\n                            <td className=\"table-cell\">{formatter.format(item.subtotal)}</td>\n                            <td className=\"table-cell\">{formatter.format(item.discount)}</td>\n                            <td className=\"table-cell\">{formatter.format(item.total)}</td>    \n                        </tr>\n                        ) \n                    })\n                }\n                </tbody>\n            </table>\n        </div>\n    )\n}"]},"metadata":{},"sourceType":"module"}