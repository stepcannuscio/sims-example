{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/stepcannuscio/Desktop/Home/Clients/Burman's Health Shop/burm-inventory/frontend/src/App.js\",\n    _s = $RefreshSig$();\n\nimport './styles/App.css';\nimport { Switch, Route, Redirect, useHistory, useLocation } from 'react-router-dom';\nimport { useState, useEffect } from 'react';\nimport axios from \"axios\";\nimport Login from './Login/Login';\nimport Home from './Home/Home';\nimport Products from './Products/Product';\nimport Vendors from \"./Vendors/Vendor\";\nimport Orders from \"./Orders/Order\";\nexport default function App() {\n  _s();\n\n  const [isLoading, setLoading] = useState(true);\n  const [loggedIn, setLoggedIn] = useState(false);\n  const [user, setUser] = useState(null);\n  const history = useHistory();\n  const location = useLocation();\n  const prevLocation = localStorage.getItem('location');\n\n  if (location.pathname !== prevLocation) {\n    localStorage.setItem('location', location.pathname);\n    console.log(location.pathname);\n  } // const loggedInUser = JSON.parse(localStorage.getItem('user'));\n  // const foundUser = JSON.parse(loggedInUser);\n  // console.log(foundUser)\n\n\n  function getUser() {\n    console.log('here?'); // const loggedInUser = JSON.parse(localStorage.getItem('user'))\n    // console.log(loggedInUser)\n    // if (loggedInUser) {\n    // setLoggedIn(true)\n    // Check with backend to see if there is a user signed in\n\n    axios.get('http://localhost:5000/user/', {\n      withCredentials: true\n    }).then(response => {\n      if (response.data.user) {\n        console.log('dis what happenig');\n        console.log(history);\n        console.log(response.data.user);\n        setUser(response.data.user);\n        console.log(response.data.user); // localStorage.setItem('user', JSON.stringify(response.data.user));\n\n        const prevLocation = localStorage.getItem('location');\n        console.log(prevLocation);\n        setLoggedIn(true);\n        console.log(history);\n        console.log(\"oh no we'rer here~!!\");\n\n        if (prevLocation === \"/login\") {\n          history.push(\"/\");\n        } else {\n          history.push(prevLocation);\n        }\n      } else {\n        setUser(response.data.user);\n        setLoggedIn(false);\n      }\n\n      setLoading(false);\n    }); // } else {\n    //   console.log(loggedInUser)\n    //   // getUser()\n    //   setUser(loggedInUser)\n    //   setLoggedIn(true)\n    //   // history.push(\"/\")\n    //   // console.log('yy')\n    // }\n  }\n\n  useEffect(() => {\n    console.log(history);\n    getUser();\n  }, []);\n\n  if (isLoading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"loader\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 14\n    }, this);\n  }\n\n  const PrivateRoute = ({\n    component: Component,\n    user,\n    ...rest\n  }) => {\n    console.log(\"Private Route:\");\n    console.log(user);\n    return /*#__PURE__*/_jsxDEV(Route, { ...rest,\n      render: props => user ? /*#__PURE__*/_jsxDEV(Component, { ...props,\n        user: user\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 15\n      }, this) : /*#__PURE__*/_jsxDEV(Redirect, {\n        to: {\n          pathname: '/login',\n          state: {\n            from: props.location\n          }\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 15\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 9\n    }, this);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(Switch, {\n      children: [/*#__PURE__*/_jsxDEV(Route, {\n        path: \"/login\",\n        children: /*#__PURE__*/_jsxDEV(Login, {\n          isLoggedIn: loggedIn,\n          parentCallback: getUser\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(PrivateRoute, {\n        path: \"/orders\",\n        component: Orders,\n        user: user\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(PrivateRoute, {\n        path: \"/vendors\",\n        component: Vendors,\n        user: user\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(PrivateRoute, {\n        path: \"/products\",\n        component: Products,\n        user: user\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(PrivateRoute, {\n        path: \"/\",\n        component: Home,\n        user: user\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 113,\n    columnNumber: 7\n  }, this);\n}\n\n_s(App, \"iPeX4dRe3mZioTDQxLksZUquNPE=\", false, function () {\n  return [useHistory, useLocation];\n});\n\n_c = App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"sources":["/Users/stepcannuscio/Desktop/Home/Clients/Burman's Health Shop/burm-inventory/frontend/src/App.js"],"names":["Switch","Route","Redirect","useHistory","useLocation","useState","useEffect","axios","Login","Home","Products","Vendors","Orders","App","isLoading","setLoading","loggedIn","setLoggedIn","user","setUser","history","location","prevLocation","localStorage","getItem","pathname","setItem","console","log","getUser","get","withCredentials","then","response","data","push","PrivateRoute","component","Component","rest","props","state","from"],"mappings":"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","sourcesContent":["import './styles/App.css';\nimport {Switch, Route, Redirect, useHistory, useLocation} from 'react-router-dom'\nimport { useState, useEffect } from 'react';\nimport axios from \"axios\"\nimport Login from './Login/Login'\nimport Home from './Home/Home'\nimport Products from './Products/Product';\nimport Vendors from \"./Vendors/Vendor\"\nimport Orders from \"./Orders/Order\"\n\n\n  export default function App() {\n\n    const [isLoading, setLoading] = useState(true);\n    const [loggedIn, setLoggedIn] = useState(false);\n    const [user, setUser] = useState(null);\n\n    const history = useHistory();\n    const location = useLocation();\n\n    const prevLocation = localStorage.getItem('location');\n    if (location.pathname !== prevLocation) {\n      localStorage.setItem('location', location.pathname);\n      console.log(location.pathname);\n    }\n    \n    // const loggedInUser = JSON.parse(localStorage.getItem('user'));\n    \n    // const foundUser = JSON.parse(loggedInUser);\n    // console.log(foundUser)\n    function getUser() {\n      console.log('here?')\n\n      // const loggedInUser = JSON.parse(localStorage.getItem('user'))\n      // console.log(loggedInUser)\n      // if (loggedInUser) {\n        \n     \n    \n\n  \n\n        // setLoggedIn(true)\n        // Check with backend to see if there is a user signed in\n        axios.get('http://localhost:5000/user/', {withCredentials: true}).then(response => {\n          if (response.data.user) {\n            console.log('dis what happenig')\n            console.log(history)\n            console.log(response.data.user)\n            setUser(response.data.user)\n            console.log(response.data.user)\n            // localStorage.setItem('user', JSON.stringify(response.data.user));\n            const prevLocation = localStorage.getItem('location');\n            console.log(prevLocation)\n\n            setLoggedIn(true)\n            console.log(history)\n\n            console.log(\"oh no we'rer here~!!\")\n\n            if (prevLocation === \"/login\") {\n              history.push(\"/\")\n            } else {\n              history.push(prevLocation)\n            }\n            \n            \n          } else {\n            setUser(response.data.user)\n            setLoggedIn(false) \n          }\n          setLoading(false)\n        });\n       \n      // } else {\n      //   console.log(loggedInUser)\n      //   // getUser()\n\n      //   setUser(loggedInUser)\n      //   setLoggedIn(true)\n      //   // history.push(\"/\")\n      //   // console.log('yy')\n      // }\n  }\n\n    useEffect(() => {\n      console.log(history)\n      getUser()\n    }, []);\n  \n    if (isLoading) {\n      return <div className=\"loader\"></div>;\n    }\n\n    const PrivateRoute = ({ component: Component, user, ...rest }) => {\n      console.log(\"Private Route:\")\n      console.log(user)\n      return (\n        <Route\n          {...rest}\n          render={props =>\n            user ? (\n              <Component {...props} user={user}/>\n            ) : (\n              <Redirect to={{ pathname: '/login', state: { from: props.location } }} />\n            )\n          }\n        />\n      )\n    }\n\n    return (\n      <div>\n        <Switch>\n          <Route path=\"/login\">\n            <Login isLoggedIn={loggedIn} parentCallback = {getUser}/>\n          </Route>\n          <PrivateRoute path='/orders' component={Orders} user={user}/>\n          <PrivateRoute path='/vendors' component={Vendors} user={user}/>\n          <PrivateRoute path='/products' component={Products} user={user}/>\n          <PrivateRoute path='/' component={Home} user={user}/>\n        </Switch>\n      </div>\n    );\n  }\n"]},"metadata":{},"sourceType":"module"}