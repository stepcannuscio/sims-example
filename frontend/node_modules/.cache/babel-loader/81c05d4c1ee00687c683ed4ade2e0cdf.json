{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/stepcannuscio/Desktop/Home/Clients/Burman's Health Shop/sims/frontend/src/Home/Home.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport Layout from \"../components/Layout\";\nimport SalesChart from \"./SalesChart\";\nimport CogsChart from \"./CogsChart\";\nimport CallToAction from \"./CallToAction\";\nimport MiniTable from \"./MiniTable\";\nimport * as router from \"./homeAPI\";\nexport default function Home(props) {\n  _s();\n\n  const [dateFilter, setDateFilter] = useState(\"month\");\n  const [revenueData, setRevenueData] = useState([]);\n  const [cogsData, setCogsData] = useState([]);\n  const [topSellers, setTopSellers] = useState([]);\n  const [inventoryValue, setInventoryValue] = useState(0);\n  const [lowProducts, setLowProducts] = useState([]);\n  const [startDate, setStartDate] = useState(\"\");\n  const [endDate, setEndDate] = useState(\"\");\n  const [updateMiniTable, setMiniTable] = useState(false);\n  const [isLoading, setLoading] = useState(true);\n  console.log(lowProducts);\n  const formatter = new Intl.NumberFormat('en-US', {\n    style: 'currency',\n    currency: 'USD',\n    minimumFractionDigits: 0\n  });\n  const style = {\n    display: `flex`,\n    justifyContent: `space-around`,\n    padding: `0 20px`,\n    color: `#1E384D`,\n    gridArea: \"main\",\n    backgroundColor: \"rgb(246,246,247)\",\n    textAlign: \"center\",\n    flexWrap: \"wrap\"\n  };\n  const filterStyle = {\n    padding: \"10px 30px\",\n    borderRadius: \"5px\",\n    border: \"none\",\n    backgroundColor: \"rgb(45,142,255)\",\n    color: \"white\",\n    fontSize: \"16px\",\n    outline: \"none\",\n    display: \"inline-block\",\n    margin: \"10px\"\n  };\n  const datePickerStyle = {\n    padding: \"10px 30px\",\n    borderRadius: \"5px\",\n    border: \"none\",\n    backgroundColor: \"rgb(45,142,255)\",\n    color: \"white\",\n    margin: \"10px\",\n    fontSize: \"16px\",\n    display: \"inline-block\",\n    fontFamily: \"inherit\"\n  };\n\n  function getData(filter) {\n    router.loadPurchases(filter, startDate, endDate).then(data => {\n      if (data) {\n        setRevenueData(data.salesData);\n        setCogsData(data.cogsData);\n        setTopSellers(data.topSellers);\n        setInventoryValue(data.inventoryValue);\n        setLowProducts(data.lowProducts);\n      }\n\n      setLoading(false);\n    });\n  }\n\n  useEffect(() => {\n    getData(dateFilter); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  function dateFilterChanged(e) {\n    setDateFilter(e.target.value);\n    getData(e.target.value);\n  }\n\n  function filterByDate() {\n    getData(dateFilter);\n    setMiniTable(!updateMiniTable);\n  }\n\n  if (isLoading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"loader\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 12\n    }, this);\n  }\n\n  return /*#__PURE__*/_jsxDEV(Layout, {\n    user: props.user,\n    children: /*#__PURE__*/_jsxDEV(\"main\", {\n      style: style,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: \"inline-block\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(CallToAction, {\n          data: lowProducts,\n          text: \"Products Running Low\",\n          type: \"products\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(CallToAction, {\n          data: formatter.format(inventoryValue),\n          text: \"Inventory Value\",\n          type: \"inventory\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          width: \"100%\",\n          margin: \"20px\",\n          justifyContent: `flex-start`\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"select\", {\n          style: filterStyle,\n          value: dateFilter,\n          onChange: dateFilterChanged,\n          id: \"dateFilter\",\n          name: \"dateFilter\",\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"day\",\n            children: \"Day\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 119,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"month\",\n            children: \"Month\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 120,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"week\",\n            children: \"Week\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 121,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"year\",\n            children: \"Year\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 122,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          style: datePickerStyle,\n          onChange: e => setStartDate(e.target.value),\n          type: \"date\",\n          id: \"start\",\n          name: \"start\",\n          value: startDate,\n          min: \"2018-01-01\",\n          max: new Date().toISOString().slice(0, 10)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          style: datePickerStyle,\n          onChange: e => setEndDate(e.target.value),\n          type: \"date\",\n          id: \"end\",\n          name: \"end\",\n          value: endDate,\n          min: \"2018-01-01\",\n          max: new Date().toISOString().slice(0, 10)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn\",\n          style: {\n            display: \"inline-block\",\n            margin: \"0\",\n            padding: \"11px 30px\",\n            backgroundColor: \"rgb(45,142,255)\",\n            color: \"white\",\n            fontSize: \"16px\",\n            cursor: \"pointer\"\n          },\n          onClick: filterByDate,\n          children: \"Filter by Date\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"chart\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Revenue\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(SalesChart, {\n          data: revenueData\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"chart\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Cost of Goods Sold\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(CogsChart, {\n          data: cogsData\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mini-table\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Top Sellers\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(MiniTable, {\n          data: topSellers\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 106,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Home, \"I1b8leOUDSPVTbLqpZ3slSdho2g=\");\n\n_c = Home;\n\nvar _c;\n\n$RefreshReg$(_c, \"Home\");","map":{"version":3,"sources":["/Users/stepcannuscio/Desktop/Home/Clients/Burman's Health Shop/sims/frontend/src/Home/Home.js"],"names":["React","useState","useEffect","Layout","SalesChart","CogsChart","CallToAction","MiniTable","router","Home","props","dateFilter","setDateFilter","revenueData","setRevenueData","cogsData","setCogsData","topSellers","setTopSellers","inventoryValue","setInventoryValue","lowProducts","setLowProducts","startDate","setStartDate","endDate","setEndDate","updateMiniTable","setMiniTable","isLoading","setLoading","console","log","formatter","Intl","NumberFormat","style","currency","minimumFractionDigits","display","justifyContent","padding","color","gridArea","backgroundColor","textAlign","flexWrap","filterStyle","borderRadius","border","fontSize","outline","margin","datePickerStyle","fontFamily","getData","filter","loadPurchases","then","data","salesData","dateFilterChanged","e","target","value","filterByDate","user","format","width","Date","toISOString","slice","cursor"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from \"react\"\n\nimport Layout from \"../components/Layout\"\nimport SalesChart from \"./SalesChart\"\nimport CogsChart from \"./CogsChart\"\nimport CallToAction from \"./CallToAction\"\nimport MiniTable from \"./MiniTable\"\n\nimport * as router from \"./homeAPI\";\n\n\nexport default function Home(props) {\n\n  const [dateFilter, setDateFilter] = useState(\"month\")\n  const [revenueData, setRevenueData] = useState([])\n  const [cogsData, setCogsData] = useState([])\n  const [topSellers, setTopSellers] = useState([])\n  const [inventoryValue, setInventoryValue] = useState(0)\n  const [lowProducts, setLowProducts] = useState([])\n  const [startDate, setStartDate] = useState(\"\")\n  const [endDate, setEndDate] = useState(\"\")\n  const [updateMiniTable, setMiniTable] = useState(false)\n  const [isLoading, setLoading] = useState(true);\n\n  console.log(lowProducts)\n\n  const formatter = new Intl.NumberFormat('en-US', {\n    style: 'currency',\n    currency: 'USD',\n    minimumFractionDigits: 0\n    })\n\n  const style = {\n    display: `flex`,\n    justifyContent: `space-around`,\n    padding: `0 20px`,\n    color: `#1E384D`,\n    gridArea: \"main\",\n    backgroundColor: \"rgb(246,246,247)\",\n    textAlign: \"center\",\n    flexWrap: \"wrap\",\n  };\n\n  const filterStyle = {\n    padding: \"10px 30px\",\n    borderRadius: \"5px\",\n    border: \"none\",\n    backgroundColor: \"rgb(45,142,255)\",\n    color: \"white\",\n    fontSize: \"16px\",\n    outline: \"none\",\n    display: \"inline-block\",\n    margin: \"10px\"\n  }\n\n  const datePickerStyle = {\n    padding: \"10px 30px\",\n    borderRadius: \"5px\",\n    border: \"none\",\n    backgroundColor: \"rgb(45,142,255)\",\n    color: \"white\",\n    margin: \"10px\",\n    fontSize: \"16px\",\n    display: \"inline-block\",\n    fontFamily: \"inherit\"\n    \n  }\n\n  function getData(filter) {\n    router.loadPurchases(filter, startDate, endDate).then(data => {\n      if (data) {\n        setRevenueData(data.salesData)\n        setCogsData(data.cogsData)\n        setTopSellers(data.topSellers)\n        setInventoryValue(data.inventoryValue)\n        setLowProducts(data.lowProducts)\n      }\n      setLoading(false)\n    });\n}\n\n  useEffect(() => {\n    getData(dateFilter)\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n \n  function dateFilterChanged(e) {\n    setDateFilter(e.target.value)\n    getData(e.target.value)\n  }\n\n  function filterByDate() {\n    getData(dateFilter)\n    setMiniTable(!updateMiniTable)\n\n  }\n\n  if (isLoading) {\n    return <div className=\"loader\"></div>;\n  }\n\n\n   \n  return (\n    <Layout user={props.user}>\n      <main style={style}>\n        <div style={{display: \"inline-block\"}}>\n\n        <CallToAction data={lowProducts} text=\"Products Running Low\" type=\"products\"/>\n        <CallToAction data={formatter.format(inventoryValue)} text=\"Inventory Value\" type=\"inventory\" />\n        </div>\n        {/* <div>\n          <p>{inventoryValue}</p>\n        </div> */}\n\n        <div style={{width: \"100%\", margin: \"20px\", justifyContent: `flex-start`,}}>\n          <select style={filterStyle} value={dateFilter} onChange={dateFilterChanged} id=\"dateFilter\" name=\"dateFilter\">\n            <option value=\"day\">Day</option>\n            <option value=\"month\">Month</option>\n            <option value=\"week\">Week</option>\n            <option value=\"year\">Year</option>\n          </select>\n          <input style={datePickerStyle} onChange={e => setStartDate(e.target.value)} type=\"date\" id=\"start\" name=\"start\"\n                value={startDate}\n                min=\"2018-01-01\" max={new Date().toISOString().slice(0,10)} />\n          <input style={datePickerStyle} onChange={e => setEndDate(e.target.value)} type=\"date\" id=\"end\" name=\"end\"\n                value={endDate}\n              min=\"2018-01-01\" max={new Date().toISOString().slice(0,10)} />    \n          <button className=\"btn\" style={{display: \"inline-block\", margin: \"0\", padding: \"11px 30px\", backgroundColor: \"rgb(45,142,255)\", color: \"white\", fontSize: \"16px\", cursor: \"pointer\"}} onClick={filterByDate}>Filter by Date</button>\n        </div>\n        \n        <div className=\"chart\">\n          <h2>Revenue</h2>\n          <SalesChart data={revenueData}/>\n        </div>\n        <div className=\"chart\">\n          <h2>Cost of Goods Sold</h2>\n          <CogsChart data={cogsData}/>\n        </div>\n        <div className=\"mini-table\">\n          <h2>Top Sellers</h2>\n          <MiniTable data={topSellers}/>\n        </div>\n      </main>\n    </Layout>\n    )\n  }"]},"metadata":{},"sourceType":"module"}