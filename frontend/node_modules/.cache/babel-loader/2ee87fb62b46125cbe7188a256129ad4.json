{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/stepcannuscio/Desktop/Home/Clients/Burman's Health Shop/burm-inventory/frontend/src/App.js\";\nimport './App.css';\nimport { Switch, Route, Redirect } from 'react-router-dom';\nimport Login from './components/Login';\nimport Home from './components/Home';\nimport React, { Component } from 'react';\nimport axios from \"axios\";\nimport Inventory from './components/Inventory';\n\nclass App extends Component {\n  constructor() {\n    super();\n    this.state = {\n      loggedIn: false,\n      user: null\n    };\n    this.getUser = this.getUser.bind(this);\n    this.componentDidMount = this.componentWillMount.bind(this);\n  }\n\n  componentWillMount() {\n    this.getUser();\n  }\n\n  getUser() {\n    return new Promise(function (resolve, reject) {\n      axios.get('http://localhost:5000/user/', {\n        withCredentials: true\n      }).then(response => {\n        console.log('Get user response: ');\n        console.log(response.data);\n\n        if (response.data.user) {\n          console.log('Get User: There is a user saved in the server session: ');\n          console.log(response.data.user);\n          resolve(setState({\n            loggedIn: true,\n            user: response.data.user\n          }));\n        } else {\n          reject(console.log('Get user: no user'));\n          this.setState({\n            loggedIn: false,\n            username: null\n          });\n        }\n      });\n    });\n  }\n\n  render() {\n    const PrivateRoute = ({\n      component: Component,\n      user,\n      ...rest\n    }) => {\n      const isLoggedIn = this.state.loggedIn;\n      console.log(isLoggedIn);\n      return /*#__PURE__*/_jsxDEV(Route, { ...rest,\n        render: props => isLoggedIn ? /*#__PURE__*/_jsxDEV(Component, { ...props,\n          user: user\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 15\n        }, this) : /*#__PURE__*/_jsxDEV(Redirect, {\n          to: {\n            pathname: '/login',\n            state: {\n              from: props.location\n            }\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 9\n      }, this);\n    };\n\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        backgroundColor: \"#1E384D\",\n        height: \"100vh\"\n      },\n      children: /*#__PURE__*/_jsxDEV(Switch, {\n        children: [/*#__PURE__*/_jsxDEV(Route, {\n          path: \"/login\",\n          children: /*#__PURE__*/_jsxDEV(Login, {\n            isLoggedIn: this.state.loggedIn,\n            parentCallback: this.getUser\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 78,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(PrivateRoute, {\n          path: \"/inventory\",\n          component: Inventory,\n          user: this.state.user\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(PrivateRoute, {\n          path: \"/\",\n          component: Home,\n          user: this.state.user\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/stepcannuscio/Desktop/Home/Clients/Burman's Health Shop/burm-inventory/frontend/src/App.js"],"names":["Switch","Route","Redirect","Login","Home","React","Component","axios","Inventory","App","constructor","state","loggedIn","user","getUser","bind","componentDidMount","componentWillMount","Promise","resolve","reject","get","withCredentials","then","response","console","log","data","setState","username","render","PrivateRoute","component","rest","isLoggedIn","props","pathname","from","location","backgroundColor","height"],"mappings":"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","sourcesContent":["import './App.css';\nimport {Switch, Route, Redirect} from 'react-router-dom'\nimport Login from './components/Login'\nimport Home from './components/Home'\nimport React, { Component } from 'react';\nimport axios from \"axios\"\nimport Inventory from './components/Inventory';\n\nclass App extends Component {\n  \n  constructor() {\n    super()\n    this.state = {\n      loggedIn: false,\n      user: null\n    }\n\n    this.getUser = this.getUser.bind(this)\n    this.componentDidMount = this.componentWillMount.bind(this)\n    \n  }\n\n  componentWillMount() {\n    this.getUser()\n  }\n\n  getUser() {\n    return new Promise(function (resolve, reject) {\n      axios.get('http://localhost:5000/user/', {withCredentials: true}).then(response => {\n        console.log('Get user response: ')\n        console.log(response.data)\n        if (response.data.user) {\n          console.log('Get User: There is a user saved in the server session: ')\n          console.log(response.data.user)\n          resolve(setState({\n            loggedIn: true,\n            user: response.data.user\n          }))\n      \n        } else {\n          reject(console.log('Get user: no user'))\n          this.setState({\n            loggedIn: false,\n            username: null\n          })\n        }\n      }\n      \n      )})}\n \n \n\n  render() {\n\n    const PrivateRoute = ({ component: Component, user, ...rest }) => {\n\n      const isLoggedIn = this.state.loggedIn\n      console.log(isLoggedIn)\n\n      return (\n        <Route\n          {...rest}\n          render={props =>\n            isLoggedIn ? (\n              <Component {...props} user={user}/>\n            ) : (\n              <Redirect to={{ pathname: '/login', state: { from: props.location } }} />\n            )\n          }\n        />\n      )\n    }\n\n    return (\n      <div style={{backgroundColor: \"#1E384D\", height: \"100vh\"}}>\n        <Switch>\n          <Route path=\"/login\">\n            <Login isLoggedIn={this.state.loggedIn} parentCallback = {this.getUser}/>\n          </Route>\n          <PrivateRoute path='/inventory' component={Inventory} user={this.state.user}/>\n          <PrivateRoute path='/' component={Home} user={this.state.user}/>\n        </Switch>\n      </div>\n    );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}