{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/stepcannuscio/Desktop/Home/Clients/Burman's Health Shop/burm-inventory/frontend/src/Orders/OrderPopup.js\",\n    _s = $RefreshSig$();\n\nimport { useState, useEffect } from \"react\";\nimport * as router from \"./orderAPI\";\nexport default function OrderPopup(props) {\n  _s();\n\n  const [data, setData] = useState([]);\n  const [isLoading, setLoading] = useState(false);\n  const [btnText, setBtnText] = useState(\"Edit\");\n  const [isEditing, setIsEditing] = useState(false);\n  const [editColor, setEditColor] = useState(\"#76c32d\");\n  const [isTrackingHidden, setTrackingHidden] = useState(true);\n  const [status, setStatus] = useState(null);\n  const [tracking, setTracking] = useState(null);\n  const [discount, setDiscount] = useState(null);\n  const [dataToUpdate, setDataToUpdate] = useState([]);\n  const [itemIds, setItemIds] = useState([]);\n  console.log(dataToUpdate);\n\n  function getOrder() {\n    setLoading(true);\n    router.loadOrder(props.values.id).then(data => {\n      if (data) {\n        setData(data);\n        setLoading(false);\n      } else {\n        console.log(\"Error getting product data\");\n      }\n    });\n  }\n\n  useEffect(() => {\n    getOrder();\n  }, []);\n\n  if (isLoading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"loader\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 16\n    }, this);\n  }\n\n  function editBtnClicked(e) {\n    if (btnText === \"Edit\") {\n      // setStatusSelectHidden(false)\n      console.log(data);\n      setBtnText(\"Save\");\n    } else {\n      // Save data\n      console.log('need to save data');\n      router.updateOrder(tracking, discount, status, props.values.id, data).then(data => {\n        if (data === \"Success\") {\n          // console.log('variants updated -')\n          setBtnText(\"Edit\");\n          getOrder();\n          setTrackingHidden(true);\n        } else {\n          console.log('error saving');\n          setBtnText(\"Edit\");\n        }\n      }); //     const updateDict = {}\n      //     dataToUpdate.forEach(item => {\n      //         updateDict[item.id] = item.quantity\n      //     })\n      //     if (dataToUpdate.length > 0) {\n      //         axios.post('http://localhost:5000/products/'+props.values.id+'/update', {updateDict}, {withCredentials: true}).then(res => {\n      //             console.log(res.data)\n      //         if (res.data === \"Success\") {\n      //             // console.log('variants updated -')\n      //             setBtnText(\"Edit\")\n      //             getProduct()\n      //         } else {\n      //             console.log('error saving')\n      //             setBtnText(\"Edit\")\n      //         }\n      // })\n      //     } else {\n      //         console.log('no data to save')\n      //         setBtnText(\"Edit\")\n      //     }\n    }\n\n    setIsEditing(!isEditing);\n    setEditColor(editColor === \"#26B1FF\" ? \"#76c32d\" : \"#26B1FF\");\n  }\n\n  function statusChanged(e) {\n    setStatus(e.target.value);\n\n    if (e.target.value === \"fulfilled\") {\n      setTrackingHidden(false);\n    } else {\n      setTrackingHidden(true);\n    }\n  }\n\n  function editInput(e) {\n    if (e.target.value !== e.target.placeholder) {\n      const orderItemId = e.target.id.split('-')[0].trim();\n      const newData = {\n        id: orderItemId\n      }; // Quantity value has changed for this variant\n\n      if (e.target.id.includes(\"quantity\")) {\n        newData.quantity = e.target.value;\n      } else {\n        newData.cost = e.target.value;\n      }\n\n      setDataToUpdate(oldArray => [...oldArray, newData]);\n    }\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"top-content\",\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"close\",\n        onClick: () => props.toggle(),\n        children: \"\\xD7    \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n        children: [\"Order #\", props.values.id]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Vendor: \", props.values.name]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Subtotal: \", props.values.subtotal]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Discount: \", props.values.discount]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Total: \", props.values.total]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Status: \", data.length > 0 ? data[0].status : \"\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Submitted: \", data.length ? data[0].submitted_date : \"\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Fulfilled: \", data.length ? data[0].fulfilled_date : \"\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Completed: \", data.length ? data[0].completed_date : \"\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 17\n      }, this), isEditing ? /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"select\", {\n          onChange: statusChanged,\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"submitted\",\n            children: \"Submitted\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 145,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"fulfilled\",\n            children: \"Fulfilled\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 146,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"completed\",\n            children: \"Completed\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 147,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          hidden: isTrackingHidden,\n          className: \"table-cell\",\n          placeholder: \"Tracking\",\n          onChange: e => setTracking(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          hidden: isTrackingHidden,\n          className: \"table-cell\",\n          placeholder: \"Discount (i.e. 180.02)\",\n          onChange: e => setDiscount(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 17\n      }, this) : /*#__PURE__*/_jsxDEV(\"p\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        hidden: isTrackingHidden ? data[0] && data[0].status === \"completed\" : false,\n        onClick: editBtnClicked,\n        className: \"edit-btn\",\n        style: {\n          backgroundColor: editColor\n        },\n        children: btnText\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n      style: {\n        textAlign: \"center\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n        children: /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [/*#__PURE__*/_jsxDEV(\"th\", {\n            className: \"table-header\",\n            children: \"Product\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 166,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            className: \"table-header\",\n            children: \"Variant\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 167,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            className: \"table-header\",\n            children: \"Quantity\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 168,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            className: \"table-header\",\n            children: \"Cost\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 169,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            className: \"table-header\",\n            children: \"Subtotal\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 170,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            className: \"table-header\",\n            children: \"Discount\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 171,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            className: \"table-header\",\n            children: \"Total\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 172,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n        children: data.map((item, index) => {\n          return /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"td\", {\n              className: \"table-cell\",\n              children: item.product\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 181,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              className: \"table-cell\",\n              children: item.variant\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 182,\n              columnNumber: 29\n            }, this), isEditing ? /*#__PURE__*/_jsxDEV(\"td\", {\n              className: \"table-cell\",\n              children: /*#__PURE__*/_jsxDEV(\"input\", {\n                className: \"table-cell\",\n                onChange: editInput,\n                id: `${item.order_item_id} - quantity`,\n                placeholder: item.quantity\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 187,\n                columnNumber: 37\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 186,\n              columnNumber: 33\n            }, this) : /*#__PURE__*/_jsxDEV(\"td\", {\n              className: \"table-cell\",\n              children: item.quantity\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 191,\n              columnNumber: 33\n            }, this), isEditing ? /*#__PURE__*/_jsxDEV(\"td\", {\n              className: \"table-cell\",\n              children: /*#__PURE__*/_jsxDEV(\"input\", {\n                className: \"table-cell\",\n                onChange: editInput,\n                id: `${item.order_item_id} - cost`,\n                placeholder: item.cost\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 198,\n                columnNumber: 37\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 197,\n              columnNumber: 33\n            }, this) : /*#__PURE__*/_jsxDEV(\"td\", {\n              className: \"table-cell\",\n              children: item.cost\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 202,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              className: \"table-cell\",\n              children: item.subtotal\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 206,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              className: \"table-cell\",\n              children: item.discount\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 207,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              className: \"table-cell\",\n              children: item.total\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 208,\n              columnNumber: 29\n            }, this)]\n          }, index, true, {\n            fileName: _jsxFileName,\n            lineNumber: 180,\n            columnNumber: 25\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 128,\n    columnNumber: 9\n  }, this);\n}\n\n_s(OrderPopup, \"39Uz/VRo3VQsC3bm5b/j8KqCTMQ=\");\n\n_c = OrderPopup;\n\nvar _c;\n\n$RefreshReg$(_c, \"OrderPopup\");","map":{"version":3,"sources":["/Users/stepcannuscio/Desktop/Home/Clients/Burman's Health Shop/burm-inventory/frontend/src/Orders/OrderPopup.js"],"names":["useState","useEffect","router","OrderPopup","props","data","setData","isLoading","setLoading","btnText","setBtnText","isEditing","setIsEditing","editColor","setEditColor","isTrackingHidden","setTrackingHidden","status","setStatus","tracking","setTracking","discount","setDiscount","dataToUpdate","setDataToUpdate","itemIds","setItemIds","console","log","getOrder","loadOrder","values","id","then","editBtnClicked","e","updateOrder","statusChanged","target","value","editInput","placeholder","orderItemId","split","trim","newData","includes","quantity","cost","oldArray","toggle","name","subtotal","total","length","submitted_date","fulfilled_date","completed_date","backgroundColor","textAlign","map","item","index","product","variant","order_item_id"],"mappings":"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","sourcesContent":["import {useState, useEffect} from \"react\"\nimport * as router from \"./orderAPI\"\n\nexport default function OrderPopup(props) {\n    \n\n    const [data, setData] = useState([])\n    const [isLoading, setLoading] = useState(false)\n\n    const [btnText, setBtnText] = useState(\"Edit\")\n    const [isEditing, setIsEditing] = useState(false)\n    const [editColor, setEditColor] = useState(\"#76c32d\")\n    const [isTrackingHidden, setTrackingHidden] = useState(true)\n    const [status, setStatus] = useState(null)\n    const [tracking, setTracking] = useState(null)\n    const [discount, setDiscount] = useState(null)\n    const [dataToUpdate, setDataToUpdate] = useState([])\n    const [itemIds, setItemIds] = useState([])\n\n    console.log(dataToUpdate)\n\n    function getOrder() {\n        setLoading(true)\n        router.loadOrder(props.values.id).then(data => {\n            if (data) {\n                setData(data)\n                setLoading(false)      \n            } else {\n                console.log(\"Error getting product data\")\n            }\n        })\n      \n      }\n\n      useEffect(() => {\n        getOrder()\n    }, []);\n\n    if (isLoading) {\n        return <div className=\"loader\"></div>;\n    }\n\n    function editBtnClicked(e) {\n        if (btnText === \"Edit\") {\n            // setStatusSelectHidden(false)\n            console.log(data)\n            setBtnText(\"Save\")\n        } else {\n            // Save data\n            console.log('need to save data')\n            \n            router.updateOrder(tracking, discount, status, props.values.id, data).then(data => {\n                if (data === \"Success\") {\n                    // console.log('variants updated -')\n                    setBtnText(\"Edit\")\n                    getOrder()\n                    setTrackingHidden(true)\n                } else {\n                    console.log('error saving')\n                    setBtnText(\"Edit\")\n                }\n            })\n\n          \n        //     const updateDict = {}\n        //     dataToUpdate.forEach(item => {\n        //         updateDict[item.id] = item.quantity\n        //     })\n         \n        //     if (dataToUpdate.length > 0) {\n        //         axios.post('http://localhost:5000/products/'+props.values.id+'/update', {updateDict}, {withCredentials: true}).then(res => {\n        //             console.log(res.data)\n        //         if (res.data === \"Success\") {\n        //             // console.log('variants updated -')\n        //             setBtnText(\"Edit\")\n        //             getProduct()\n        //         } else {\n        //             console.log('error saving')\n        //             setBtnText(\"Edit\")\n        //         }\n        // })\n        //     } else {\n        //         console.log('no data to save')\n        //         setBtnText(\"Edit\")\n        //     }\n            \n            \n        }\n        setIsEditing(!isEditing)\n        setEditColor(editColor === \"#26B1FF\" ? \"#76c32d\" : \"#26B1FF\")\n    }\n\n    function statusChanged(e) {\n        setStatus(e.target.value)\n\n        if (e.target.value === \"fulfilled\") {\n            setTrackingHidden(false)\n        } else {\n            setTrackingHidden(true)\n        }\n        \n    }\n\n    function editInput(e) {\n        if (e.target.value !== e.target.placeholder) {\n            const orderItemId = e.target.id.split('-')[0].trim()\n\n            const newData = {\n                id: orderItemId\n            }\n            // Quantity value has changed for this variant\n            if (e.target.id.includes(\"quantity\")) {\n                newData.quantity = e.target.value\n            } else {\n                newData.cost = e.target.value\n            }\n\n            \n\n          \n\n            setDataToUpdate(oldArray => [...oldArray, newData])\n       \n        }\n    }\n\n    return (\n        <div>\n            <div className=\"top-content\">\n                <span className=\"close\" onClick={() =>  props.toggle()}>&times;    </span>\n                <h2>Order #{props.values.id}</h2>\n                <p>Vendor: {props.values.name}</p>\n                <p>Subtotal: {props.values.subtotal}</p>\n                <p>Discount: {props.values.discount}</p>\n                <p>Total: {props.values.total}</p>\n                <p>Status: {data.length > 0 ? data[0].status : \"\"}</p>\n                <p>Submitted: {data.length ? data[0].submitted_date : \"\"}</p>\n                <p>Fulfilled: {data.length ? data[0].fulfilled_date : \"\"}</p>\n                <p>Completed: {data.length ? data[0].completed_date : \"\"}</p>\n                \n                {isEditing \n                    ?\n                <div>\n                    <select onChange={statusChanged}>\n                        <option value=\"submitted\">Submitted</option>\n                        <option value=\"fulfilled\">Fulfilled</option>\n                        <option value=\"completed\">Completed</option>\n                    </select>\n                    <input hidden={isTrackingHidden} className=\"table-cell\" placeholder=\"Tracking\" onChange={(e) => setTracking(e.target.value)}></input>\n                    <input hidden={isTrackingHidden} className=\"table-cell\" placeholder=\"Discount (i.e. 180.02)\" onChange={(e) => setDiscount(e.target.value)}></input>\n                    </div>\n                :\n                <p></p>\n\n                }\n               \n                <button hidden={isTrackingHidden ? data[0] && data[0].status === \"completed\" : false} onClick={editBtnClicked} className=\"edit-btn\" style={{backgroundColor: editColor}}>{btnText}</button>\n                {/* <p>Products: {props.values.products}</p>\n                <p>Low Products: {props.values.low_products}</p>\n                <button onClick={orderClicked} className=\"edit-btn\" style={{backgroundColor: editColor}}>{btnText}</button>    */}\n            </div>\n\n            <table style={{textAlign: \"center\"}}>\n                <thead >\n                    <tr>\n                        <th className=\"table-header\">Product</th>\n                        <th className=\"table-header\">Variant</th>\n                        <th className=\"table-header\">Quantity</th>\n                        <th className=\"table-header\">Cost</th>\n                        <th className=\"table-header\">Subtotal</th>\n                        <th className=\"table-header\">Discount</th>\n                        <th className=\"table-header\">Total</th>\n                        {/* <th style={tableHeaderStyle}> </th> */}\n                    </tr>\n                </thead>\n\n                <tbody>\n                {data.map((item, index) => {\n                    return (\n                        <tr key={index}>\n                            <td className=\"table-cell\">{item.product}</td>\n                            <td className=\"table-cell\">{item.variant}</td>\n                           \n                            {isEditing \n                                ? \n                                <td className=\"table-cell\">\n                                    <input className=\"table-cell\" onChange={editInput} id={`${item.order_item_id} - quantity`} placeholder={item.quantity}></input>\n                                </td>\n                                \n                                :\n                                <td className=\"table-cell\">\n                                    {item.quantity}\n                                </td>\n                                }\n                                {isEditing \n                                ? \n                                <td className=\"table-cell\">\n                                    <input className=\"table-cell\" onChange={editInput} id={`${item.order_item_id} - cost`} placeholder={item.cost}></input>\n                                </td>\n                                \n                                :\n                                <td className=\"table-cell\">\n                                    {item.cost}\n                                </td>\n                                }\n                            <td className=\"table-cell\">{item.subtotal}</td>\n                            <td className=\"table-cell\">{item.discount}</td>\n                            <td className=\"table-cell\">{item.total}</td>\n                            \n                        </tr>\n                        ) \n                    })\n                }\n                </tbody>\n            </table>\n        </div>\n        \n\n    )\n}"]},"metadata":{},"sourceType":"module"}