{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/stepcannuscio/Desktop/Home/Clients/Burman's Health Shop/burm-inventory/frontend/src/App.js\";\nimport './App.css';\nimport { BrowserRouter, Switch, Route, Redirect, useHistory, withRouter } from 'react-router-dom';\nimport Login from './components/Login';\nimport Home from './components/Home';\nimport React, { Component } from 'react';\nimport { useState } from \"react\";\nimport axios from \"axios\"; // import PrivateRoute from \"./PrivateRoute\"\n\nclass App extends Component {\n  constructor() {\n    super();\n    this.state = {\n      loggedIn: false,\n      username: null\n    }; // this.history = this.useHistory.bind(this)\n\n    this.getUser = this.getUser.bind(this);\n    this.checkUser = this.checkUser.bind(this);\n    this.componentDidMount = this.componentDidMount.bind(this); // this.updateUser = this.updateUser.bind(this)\n  }\n\n  componentDidMount() {\n    this.getUser(); // this.render()\n  } // updateUser (userObject) {\n  //   this.setState(userObject)\n  // }\n\n\n  getUser() {\n    axios.get('http://localhost:5000/user/', {\n      withCredentials: true\n    }).then(response => {\n      console.log('Get user response: ');\n      console.log(response.data);\n\n      if (response.data.user) {\n        console.log('Get User: There is a user saved in the server session: ');\n        this.setState({\n          loggedIn: true,\n          username: response.data.user.username\n        });\n        this.render();\n      } else {\n        console.log('Get user: no user');\n        this.setState({\n          loggedIn: false,\n          username: null\n        }); // this..push(\"/\")\n      }\n    });\n  }\n\n  checkUser() {\n    axios.get('http://localhost:5000/user/', {\n      withCredentials: true\n    }).then(response => {\n      console.log('Get user response: ');\n      console.log(response.data);\n\n      if (response.data.user) {\n        return true;\n      } else {\n        return false;\n      }\n    });\n  } // const [color, setColor] = useState(\"#1E384D\")\n  // const [auth, setAuth] = useState(false)\n  // const [authenticated, setAuthenticated] = useState({loggedIn: false, username: null})\n  // // const [isAuthenticated, setIsAuthenticated]\n  // // state = { message: \"\" }\n  // function authCallback(isAuthenticated) {\n  //   console.log('function authCallback')\n  //   setAuth(true)\n  //   // axios.get(\"http://localhost:5000/user\", { withCredentials: true })\n  //   // .then(req => console.log(req))\n  //   // .catch(console.error);\n  // }\n  // function getUser() {\n  //   axios.get('/user/').then(response => {\n  //     console.log('Get user response: ')\n  //     console.log(response.data)\n  //     if (response.data.user) {\n  //       console.log('Get User: There is a user saved in the server session: ')\n  //       setAuthenticated({\n  //         loggedIn: true,\n  //         username: response.data.user.username\n  //       })\n  //     } else {\n  //       console.log('Get user: no user');\n  //       setAuthenticated({\n  //         loggedIn: false,\n  //         username: null\n  //       })\n  //     }\n  //   })\n  // }\n  //   componentDidMount() {\n  //     getUser()\n  //   }\n  // axios.get(\"http://localhost:5000/user\", { withCredentials: true })\n  // .then(req => console.log(req.user))\n  // .catch(console.error);\n\n\n  render() {\n    // const PrivateRoute = ({component: Component, authed, ...rest}) => {\n    //   console.log(\"Private route\")\n    //   console.log(authed)\n    //   return (\n    //     <Route\n    //       {...rest}\n    //       render={(props) => authed === true\n    //         ? <Component {...props} />\n    //         : <Redirect to={{pathname: '/login', state: {from: props.location}}} />}\n    //     />\n    //   )\n    // }\n    // const {isAuthenticate} = \n    // const { from } = this.props.location || { from: { pathname: '/' } }\n    // if (this.state.loggedIn === true) {\n    //   console.log('logged in yuhh')\n    //   // this.props.history.push(\"/\")\n    //   // withRouter(<Home />)\n    //   return <Redirect to=\"/\"/>\n    // }\n    const PrivateRoute = ({\n      component: Component,\n      ...rest\n    }) => {\n      // Add your own authentication on the below line.\n      // var isLoggedIn = false\n      // axios.get('http://localhost:5000/user/', {withCredentials: true}).then(response => {\n      //   console.log('Get user response: ')\n      //   console.log(response.data)\n      //   if (response.data.user) {\n      //     isLoggedIn = true\n      //   } else {\n      //     isLoggedIn = false\n      //   }\n      // }\n      // )\n      // console.log(isLoggedIn)\n      const isLoggedIn = this.state.loggedIn;\n      console.log(isLoggedIn);\n      return /*#__PURE__*/_jsxDEV(Route, { ...rest,\n        render: props => isLoggedIn ? /*#__PURE__*/_jsxDEV(Component, { ...props\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 182,\n          columnNumber: 15\n        }, this) : /*#__PURE__*/_jsxDEV(Redirect, {\n          to: {\n            pathname: '/login',\n            state: {\n              from: props.location\n            }\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 184,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 9\n      }, this);\n    }; // const PrivateRoute = ({ component: Component, ...rest }) => (\n    //   <Route {...rest} render={(props) => (\n    //     this.state.loggedIn === true\n    //       ? <Component {...props} />\n    //       : <Redirect to={{\n    //           pathname: '/login',\n    //           // state: { from: props.location }\n    //         }} />\n    //   )} />\n    // )\n\n\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        backgroundColor: \"#1E384D\",\n        height: \"100vh\"\n      },\n      children: /*#__PURE__*/_jsxDEV(BrowserRouter, {\n        children: /*#__PURE__*/_jsxDEV(Switch, {\n          children: [/*#__PURE__*/_jsxDEV(Route, {\n            path: \"/login\",\n            children: /*#__PURE__*/_jsxDEV(Login, {\n              isLoggedIn: this.state.loggedIn,\n              parentCallback: this.getUser\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 212,\n              columnNumber: 13\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 210,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(PrivateRoute, {\n            path: \"/\",\n            component: Home\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 214,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 209,\n          columnNumber: 9\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/stepcannuscio/Desktop/Home/Clients/Burman's Health Shop/burm-inventory/frontend/src/App.js"],"names":["BrowserRouter","Switch","Route","Redirect","useHistory","withRouter","Login","Home","React","Component","useState","axios","App","constructor","state","loggedIn","username","getUser","bind","checkUser","componentDidMount","get","withCredentials","then","response","console","log","data","user","setState","render","PrivateRoute","component","rest","isLoggedIn","props","pathname","from","location","backgroundColor","height"],"mappings":"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","sourcesContent":["import './App.css';\nimport {BrowserRouter, Switch, Route, Redirect, useHistory, withRouter} from 'react-router-dom'\nimport Login from './components/Login'\nimport Home from './components/Home'\nimport React, { Component } from 'react';\nimport {useState} from \"react\"\nimport axios from \"axios\"\n// import PrivateRoute from \"./PrivateRoute\"\n\nclass App extends Component {\n  \n  constructor() {\n    super()\n    this.state = {\n      loggedIn: false,\n      username: null\n    }\n\n  \n\n    \n    // this.history = this.useHistory.bind(this)\n    this.getUser = this.getUser.bind(this)\n    this.checkUser = this.checkUser.bind(this)\n    this.componentDidMount = this.componentDidMount.bind(this)\n    // this.updateUser = this.updateUser.bind(this)\n    \n  }\n\n  componentDidMount() {\n    this.getUser()\n    // this.render()\n  }\n\n  // updateUser (userObject) {\n  //   this.setState(userObject)\n  // }\n\n  getUser() {\n    axios.get('http://localhost:5000/user/', {withCredentials: true}).then(response => {\n      console.log('Get user response: ')\n      console.log(response.data)\n      if (response.data.user) {\n        console.log('Get User: There is a user saved in the server session: ')\n\n        this.setState({\n          loggedIn: true,\n          username: response.data.user.username\n        })\n        this.render()\n      } else {\n        console.log('Get user: no user');\n        this.setState({\n          loggedIn: false,\n          username: null\n        })\n        // this..push(\"/\")\n      }\n    }\n    )\n  }\n\n  checkUser() {\n    axios.get('http://localhost:5000/user/', {withCredentials: true}).then(response => {\n      console.log('Get user response: ')\n      console.log(response.data)\n      if (response.data.user) {\n\n        return true\n      } else {\n        return false\n      }\n    }\n    )\n  }\n\n\n  \n  // const [color, setColor] = useState(\"#1E384D\")\n  // const [auth, setAuth] = useState(false)\n  // const [authenticated, setAuthenticated] = useState({loggedIn: false, username: null})\n  // // const [isAuthenticated, setIsAuthenticated]\n\n  // // state = { message: \"\" }\n  // function authCallback(isAuthenticated) {\n  //   console.log('function authCallback')\n  //   setAuth(true)\n  //   // axios.get(\"http://localhost:5000/user\", { withCredentials: true })\n  //   // .then(req => console.log(req))\n  //   // .catch(console.error);\n  \n    \n  // }\n\n  // function getUser() {\n  //   axios.get('/user/').then(response => {\n  //     console.log('Get user response: ')\n  //     console.log(response.data)\n  //     if (response.data.user) {\n  //       console.log('Get User: There is a user saved in the server session: ')\n\n  //       setAuthenticated({\n  //         loggedIn: true,\n  //         username: response.data.user.username\n  //       })\n  //     } else {\n  //       console.log('Get user: no user');\n  //       setAuthenticated({\n  //         loggedIn: false,\n  //         username: null\n  //       })\n  //     }\n  //   })\n  // }\n\n  //   componentDidMount() {\n  //     getUser()\n  //   }\n\n\n\n    // axios.get(\"http://localhost:5000/user\", { withCredentials: true })\n    // .then(req => console.log(req.user))\n    // .catch(console.error);\n  \n\n \n\n  render() {\n\n  // const PrivateRoute = ({component: Component, authed, ...rest}) => {\n  //   console.log(\"Private route\")\n  //   console.log(authed)\n  //   return (\n  //     <Route\n  //       {...rest}\n  //       render={(props) => authed === true\n  //         ? <Component {...props} />\n  //         : <Redirect to={{pathname: '/login', state: {from: props.location}}} />}\n  //     />\n  //   )\n  // }\n\n    // const {isAuthenticate} = \n    // const { from } = this.props.location || { from: { pathname: '/' } }\n\n    // if (this.state.loggedIn === true) {\n    //   console.log('logged in yuhh')\n    //   // this.props.history.push(\"/\")\n    //   // withRouter(<Home />)\n    //   return <Redirect to=\"/\"/>\n      \n   \n    // }\n\n    const PrivateRoute = ({ component: Component, ...rest }) => {\n\n      // Add your own authentication on the below line.\n      // var isLoggedIn = false\n\n      // axios.get('http://localhost:5000/user/', {withCredentials: true}).then(response => {\n      //   console.log('Get user response: ')\n      //   console.log(response.data)\n      //   if (response.data.user) {\n  \n      //     isLoggedIn = true\n      //   } else {\n      //     isLoggedIn = false\n      //   }\n      // }\n      // )\n      \n      // console.log(isLoggedIn)\n      const isLoggedIn = this.state.loggedIn\n      console.log(isLoggedIn)\n    \n      return (\n        <Route\n          {...rest}\n          render={props =>\n            isLoggedIn ? (\n              <Component {...props} />\n            ) : (\n              <Redirect to={{ pathname: '/login', state: { from: props.location } }} />\n            )\n          }\n        />\n      )\n    }\n    \n\n    // const PrivateRoute = ({ component: Component, ...rest }) => (\n      \n    //   <Route {...rest} render={(props) => (\n    //     this.state.loggedIn === true\n    //       ? <Component {...props} />\n    //       : <Redirect to={{\n    //           pathname: '/login',\n    //           // state: { from: props.location }\n    //         }} />\n    //   )} />\n    // )\n    \n\n    return (\n      <div style={{backgroundColor: \"#1E384D\", height: \"100vh\"}}>\n        \n        <BrowserRouter>\n        <Switch>\n          <Route path=\"/login\">\n            {/* parentCallback = {authCallback} */}\n            <Login isLoggedIn={this.state.loggedIn} parentCallback = {this.getUser}/>\n          </Route>\n          <PrivateRoute path='/' component={Home} />\n          {/* <PrivateRoute path='/' authed={this.state.loggedIn} component={Home} /> */}\n          {/* <PrivateRoute authed={false} path='/'>\n            <Home />\n          </PrivateRoute> */}\n          {/* <Route path=\"/\" component={Home} /> */}\n          </Switch>\n  \n        </BrowserRouter>\n        \n      </div>\n    );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}